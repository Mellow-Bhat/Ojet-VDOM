{"version":3,"file":"usePressClick-b5bf4243.js","sources":["../../src/hooks/UNSAFE_usePressClick/usePressClick.ts"],"sourcesContent":["import { useCallback } from 'preact/hooks';\n\ntype PressOptions = {\n  isDisabled?: boolean;\n};\n\nconst DefaultSettings = {\n  isDisabled: false\n};\n\n// JET-77334: Prevent browser default behavior where onClick is fired continuously if you\n// hold down the Enter key. We also disable repeats for Space to prevent cases where you\n// hold the key down, transfer focus to the element, and then release the key. We only want\n// to invoke the press handler when you press and release on the same element.\nconst onKeyDown = (event: KeyboardEvent) => {\n  if ((event.code === 'Enter' || event.code === 'Space') && event.repeat) {\n    event.preventDefault();\n  }\n};\n\n/**\n * Returns a click handler that can make a target element either clickable or keyboard pressable.\n * Note that handling repeated keys (holding down Enter or Space) is disabled.\n *\n * @param onPressHandler function\n * @param isDisabled boolean\n * @returns\n */\n\nexport function usePressClick(\n  onPressHandler: (event: Event) => void,\n  settings: PressOptions = DefaultSettings\n): { pressProps: Record<string, any> } {\n  const onClick = useCallback(\n    (event: Event) => {\n      // See note above about why propagation is stopped: to prevent nested component bubbling clicks issue\n      event.stopPropagation();\n      // in legacy, we would check event.detail <= 1 to fire only once on multi-clicks,\n      // however, for now keeping this simple.\n      onPressHandler(event);\n    },\n    [onPressHandler]\n  );\n\n  const pressProps = settings?.isDisabled ? {} : { onClick, onKeyDown };\n\n  return {\n    pressProps\n  };\n}\n"],"names":["DefaultSettings","isDisabled","onKeyDown","event","code","repeat","preventDefault","onPressHandler","settings","onClick","useCallback","stopPropagation","pressProps"],"mappings":"8DAMA,MAAMA,EAAkB,CACtBC,YAAY,GAORC,EAAaC,IACG,UAAfA,EAAMC,MAAmC,UAAfD,EAAMC,OAAqBD,EAAME,QAC9DF,EAAMG,gBACP,2BAaDC,EACAC,EAAyBR,GAEzB,MAAMS,EAAUC,eACbP,IAECA,EAAMQ,kBAGNJ,EAAeJ,EAAM,GAEvB,CAACI,IAKH,MAAO,CACLK,WAHiBJ,GAAUP,WAAa,CAAE,EAAG,CAAEQ,UAASP,aAK5D"}